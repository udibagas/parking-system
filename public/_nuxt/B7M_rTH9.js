import{t as M,X as we,ad as Z,af as q,ag as G,Y as ke,$ as Ee,ah as Ve,B as Ce,ai as Se,Z as Ie,a1 as Te,j as k,n as Ne,a9 as Ae,p as Pe,d as ze,r as Be,g as De,h as Ue,m as $e,c as Fe,s as Le,b as Me,a as Ke}from"./N_3RupcO.js";import{E as Oe,a as je,b as Re}from"./BFN5Bcf_.js";import{u as He,b as xe,c as We,a as Xe,E as Ye}from"./CQ87zHAx.js";import{E as Ze,a as qe,b as Ge}from"./r0MXsWOm.js";import{E as Je,a as Qe}from"./DKw5DeKH.js";import{a6 as W,d as ie,c as b,r as X,a3 as te,o as se,t as i,v as g,x as h,E as e,T as _,K as ea,M as p,A as l,Z as B,N as v,y as I,z as t,X as le,Y as aa,V as K,a4 as ta,an as oe,B as y,W as ne,F as la,I as oa,H as na}from"./B_uP_klg.js";import{b as ia,d as sa,h as O,a as Y,u as ra,_ as da,w as ua}from"./CQShpek0.js";import{i as ca,v as pa}from"./FnLMtbQl.js";import{E as ma}from"./mbAiO_yR.js";import"./l0sNRNKZ.js";const fa=ia({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:ca},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:M},activeActionIcon:{type:M},activeIcon:{type:M},inactiveIcon:{type:M},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:sa(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...we(["ariaLabel"])}),va={[Z]:c=>O(c)||W(c)||Y(c),[q]:c=>O(c)||W(c)||Y(c),[G]:c=>O(c)||W(c)||Y(c)},_a=["onClick"],ha=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],ba=["aria-hidden"],ya=["aria-hidden"],ga=["aria-hidden"],re="ElSwitch",wa=ie({name:re}),ka=ie({...wa,props:fa,emits:va,setup(c,{expose:T,emit:m}){const o=c,{formItem:E}=ke(),V=Ee(),s=ra("switch"),{inputId:N}=Ve(o,{formItemContext:E}),C=Ce(b(()=>o.loading)),D=X(o.modelValue!==!1),w=X(),U=X(),j=b(()=>[s.b(),s.m(V.value),s.is("disabled",C.value),s.is("checked",r.value)]),R=b(()=>[s.e("label"),s.em("label","left"),s.is("active",!r.value)]),H=b(()=>[s.e("label"),s.em("label","right"),s.is("active",r.value)]),x=b(()=>({width:Se(o.width)}));te(()=>o.modelValue,()=>{D.value=!0});const A=b(()=>D.value?o.modelValue:!1),r=b(()=>A.value===o.activeValue);[o.activeValue,o.inactiveValue].includes(A.value)||(m(Z,o.inactiveValue),m(q,o.inactiveValue),m(G,o.inactiveValue)),te(r,a=>{var d;w.value.checked=a,o.validateEvent&&((d=E==null?void 0:E.validate)==null||d.call(E,"change").catch($=>Ie()))});const P=()=>{const a=r.value?o.inactiveValue:o.activeValue;m(Z,a),m(q,a),m(G,a),ta(()=>{w.value.checked=r.value})},n=()=>{if(C.value)return;const{beforeChange:a}=o;if(!a){P();return}const d=a();[oe(d),O(d)].includes(!0)||Ae(re,"beforeChange must return type `Promise<boolean>` or `boolean`"),oe(d)?d.then(F=>{F&&P()}).catch(F=>{}):d&&P()},S=()=>{var a,d;(d=(a=w.value)==null?void 0:a.focus)==null||d.call(a)};return se(()=>{w.value.checked=r.value}),Te({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},b(()=>!!o.label)),T({focus:S,checked:r}),(a,d)=>(i(),g("div",{class:_(e(j)),onClick:K(n,["prevent"])},[h("input",{id:e(N),ref_key:"input",ref:w,class:_(e(s).e("input")),type:"checkbox",role:"switch","aria-checked":e(r),"aria-disabled":e(C),"aria-label":a.label||a.ariaLabel,name:a.name,"true-value":a.activeValue,"false-value":a.inactiveValue,disabled:e(C),tabindex:a.tabindex,onChange:P,onKeydown:ea(n,["enter"])},null,42,ha),!a.inlinePrompt&&(a.inactiveIcon||a.inactiveText)?(i(),g("span",{key:0,class:_(e(R))},[a.inactiveIcon?(i(),p(e(k),{key:0},{default:l(()=>[(i(),p(B(a.inactiveIcon)))]),_:1})):v("v-if",!0),!a.inactiveIcon&&a.inactiveText?(i(),g("span",{key:1,"aria-hidden":e(r)},I(a.inactiveText),9,ba)):v("v-if",!0)],2)):v("v-if",!0),h("span",{ref_key:"core",ref:U,class:_(e(s).e("core")),style:aa(e(x))},[a.inlinePrompt?(i(),g("div",{key:0,class:_(e(s).e("inner"))},[a.activeIcon||a.inactiveIcon?(i(),p(e(k),{key:0,class:_(e(s).is("icon"))},{default:l(()=>[(i(),p(B(e(r)?a.activeIcon:a.inactiveIcon)))]),_:1},8,["class"])):a.activeText||a.inactiveText?(i(),g("span",{key:1,class:_(e(s).is("text")),"aria-hidden":!e(r)},I(e(r)?a.activeText:a.inactiveText),11,ya)):v("v-if",!0)],2)):v("v-if",!0),h("div",{class:_(e(s).e("action"))},[a.loading?(i(),p(e(k),{key:0,class:_(e(s).is("loading"))},{default:l(()=>[t(e(Ne))]),_:1},8,["class"])):e(r)?le(a.$slots,"active-action",{key:1},()=>[a.activeActionIcon?(i(),p(e(k),{key:0},{default:l(()=>[(i(),p(B(a.activeActionIcon)))]),_:1})):v("v-if",!0)]):e(r)?v("v-if",!0):le(a.$slots,"inactive-action",{key:2},()=>[a.inactiveActionIcon?(i(),p(e(k),{key:0},{default:l(()=>[(i(),p(B(a.inactiveActionIcon)))]),_:1})):v("v-if",!0)])],2)],6),!a.inlinePrompt&&(a.activeIcon||a.activeText)?(i(),g("span",{key:1,class:_(e(H))},[a.activeIcon?(i(),p(e(k),{key:0},{default:l(()=>[(i(),p(B(a.activeIcon)))]),_:1})):v("v-if",!0),!a.activeIcon&&a.activeText?(i(),g("span",{key:1,"aria-hidden":!e(r)},I(a.activeText),9,ga)):v("v-if",!0)],2)):v("v-if",!0)],10,_a))}});var Ea=da(ka,[["__file","switch.vue"]]);const Va=ua(Ea),Ca={style:{display:"flex","justify-content":"space-between"}},Sa=h("div",{style:{"font-size":"1.2em","line-height":"41px"}},"KELOLA USER",-1),Ia=h("br",null,null,-1),Ta={class:"el-dropdown-link"},Na=h("br",null,null,-1),Ka={__name:"user",setup(c){const{showForm:T,formErrors:m,formModel:o,pageSize:E,tableData:V,loading:s,keyword:N,currentChange:C,sizeChange:D,sortChange:w,openForm:U,save:j,deleteData:R,closeForm:H,requestData:x,searchData:A,refreshData:r}=He("/api/user");return se(()=>{x()}),(P,n)=>{const S=Me,a=Ke,d=Oe,$=We,F=k,J=Ze,de=qe,ue=Ge,ce=je,pe=Re,z=Je,me=Ye,fe=Xe,ve=Va,_e=Qe,he=ma,be=xe,ye=pa;return i(),p(be,null,{default:l(()=>[h("div",Ca,[Sa,h("form",{class:"flex justify-content-end",onSubmit:n[2]||(n[2]=K((...u)=>e(A)&&e(A)(...u),["prevent"]))},[t(S,{size:"small",onClick:n[0]||(n[0]=u=>e(U)({role:0,password:""})),type:"primary",icon:e(Pe),class:"mr-2"},{default:l(()=>[y(" TAMBAH USER ")]),_:1},8,["icon"]),h("div",null,[t(a,{size:"small",modelValue:e(N),"onUpdate:modelValue":n[1]||(n[1]=u=>ne(N)?N.value=u:null),placeholder:"Cari","prefix-icon":e(ze),clearable:!0},null,8,["modelValue","prefix-icon"])])],32)]),Ia,la((i(),p(ce,{stripe:"",height:"calc(100vh - 240px)",data:e(V).data,onSortChange:e(w)},{default:l(()=>[t(d,{type:"index",index:e(V).from,label:"#"},null,8,["index"]),t(d,{prop:"name",label:"Nama",sortable:"custom"}),t(d,{prop:"role",label:"Level",sortable:"custom"},{default:l(({row:u})=>[y(I(u.role?"Admin":"Operator"),1)]),_:1}),t(d,{prop:"status",label:"Status",sortable:"custom",align:"center","header-align":"center",width:"100"},{default:l(({row:u})=>[t($,{type:u.status?"success":"info",size:"small",style:{width:"100%"},effect:"dark"},{default:l(()=>[y(I(u.status?"Aktif":"Nonaktif"),1)]),_:2},1032,["type"])]),_:1}),t(d,{width:"60px",align:"center","header-align":"center"},{header:l(()=>[t(S,{link:"",onClick:e(r),icon:e(Be)},null,8,["onClick","icon"])]),default:l(({row:u})=>[t(ue,null,{dropdown:l(()=>[t(de,null,{default:l(()=>[t(J,{icon:e(De),onClick:K(L=>e(U)(u),["prevent"])},{default:l(()=>[y(" Edit ")]),_:2},1032,["icon","onClick"]),t(J,{icon:e(Ue),onClick:K(L=>e(R)(u.id),["prevent"])},{default:l(()=>[y(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:l(()=>[h("span",Ta,[t(F,null,{default:l(()=>[t(e($e))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[ye,e(s)]]),Na,e(V).total?(i(),p(pe,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(E),"page-sizes":[10,25,50,100],total:e(V).total,onCurrentChange:e(C),onSizeChange:e(D)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):v("",!0),t(he,{modelValue:e(T),"onUpdate:modelValue":n[9]||(n[9]=u=>ne(T)?T.value=u:null),width:"500px",title:e(o).id?"EDIT USER":"TAMBAH USER","close-on-click-modal":!1},{footer:l(()=>[t(S,{icon:e(Fe),onClick:e(H)},{default:l(()=>[y(" BATAL ")]),_:1},8,["icon","onClick"]),t(S,{icon:e(Le),type:"primary",onClick:n[8]||(n[8]=u=>e(j)())},{default:l(()=>[y(" SIMPAN ")]),_:1},8,["icon"])]),default:l(()=>[t(_e,{"label-width":"160px","label-position":"left"},{default:l(()=>{var u,L,Q,ee,ae;return[t(z,{label:"Nama",error:(u=e(m).name)==null?void 0:u.join(", ")},{default:l(()=>[t(a,{placeholder:"Nama",modelValue:e(o).name,"onUpdate:modelValue":n[3]||(n[3]=f=>e(o).name=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Level",error:(L=e(m).role)==null?void 0:L.join(", ")},{default:l(()=>[t(fe,{modelValue:e(o).role,"onUpdate:modelValue":n[4]||(n[4]=f=>e(o).role=f),placeholder:"Level",style:{width:"100%"}},{default:l(()=>[(i(),g(na,null,oa([{value:0,label:"Operator"},{value:1,label:"Admin"}],(f,ge)=>t(me,{value:f.value,label:f.label,key:ge},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Password",error:(Q=e(m).password)==null?void 0:Q.join(", ")},{default:l(()=>[t(a,{type:"password",placeholder:"Password",modelValue:e(o).password,"onUpdate:modelValue":n[5]||(n[5]=f=>e(o).password=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Konfirmasi Password",error:(ee=e(m).password)==null?void 0:ee.join(", ")},{default:l(()=>[t(a,{type:"password",placeholder:"Konfirmasi Password",modelValue:e(o).password_confirmation,"onUpdate:modelValue":n[6]||(n[6]=f=>e(o).password_confirmation=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Status",error:(ae=e(m).status)==null?void 0:ae.join(", ")},{default:l(()=>[t(ve,{"active-value":!0,"inactive-value":!1,modelValue:e(o).status,"onUpdate:modelValue":n[7]||(n[7]=f=>e(o).status=f),"active-color":"#13ce66"},null,8,["modelValue"]),t($,{type:e(o).status?"success":"info",size:"small",style:{"margin-left":"10px"}},{default:l(()=>[y(I(e(o).status?"Aktif":"Nonaktif"),1)]),_:1},8,["type"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue","title"])]),_:1})}}};export{Ka as default};
