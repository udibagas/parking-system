(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{404:function(e,t,r){"use strict";r.r(t);r(38),r(28),r(37),r(48),r(27),r(49);var o=r(14),l=(r(10),r(251),r(42));function n(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var m={props:["model","show"],watch:{"formModel.berbayar":function(e){e||(this.formModel.tarif=0)}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({formModel:function(){return this.model},expiry_date:function(){try{return moment(this.formModel.register_date,"YYYY-MM-DD").add(this.formModel.siklus_pembayaran,this.formModel.siklus_pembayaran_unit).format("YYYY-MM-DD")}catch(e){return""}}},Object(l.b)(["user","groupMemberList","setting","siklus","jenisKendaraanList"])),data:function(){return{formErrors:{},loading:!1}},methods:{closeForm:function(){this.formErrors={},this.$emit("close")},store:function(){var e=this;this.loading=!0,this.formModel.expiry_date=this.expiry_date,axios.post("/member",this.formModel).then((function(t){e.$emit("close"),e.$message({message:"Data berhasil disimpan.",type:"success"}),e.$emit("reload"),e.$store.commit("getMemberList")})).catch((function(t){422==t.response.status&&(e.formErrors=t.response.data.errors),500==t.response.status&&(e.formErrors={}),e.$message({message:t.response.data.message,type:"error"})})).finally((function(){e.loading=!1}))},update:function(){var e=this;this.loading=!0,this.formModel.expiry_date=this.expiry_date,axios.put("/member/".concat(this.formModel.id),this.formModel).then((function(t){e.$emit("close"),e.$message({message:"Data berhasil disimpan.",type:"success",showClose:!0}),e.$emit("reload"),e.$store.commit("getMemberList")})).catch((function(t){422==t.response.status&&(e.formErrors=t.response.data.errors),500==t.response.status&&(e.formErrors={}),e.$message({message:t.response.data.message,type:"error"})})).finally((function(){e.loading=!1}))},addVehicle:function(){this.formModel.vehicles.length<this.setting.jml_kendaraan_per_kartu||0==this.setting.jml_kendaraan_per_kartu?this.formModel.vehicles.push({plat_nomor:"",jenis_kendaraan:"",tipe:"",merk:"",tahun:"",warna:""}):this.$message({message:"Jumlah maksimal kendaraan per kartu adalah ".concat(this.setting.jml_kendaraan_per_kartu),type:"error"})},deleteVehicle:function(e,t){var r=this;t?axios.delete("/memberVehicle/".concat(t)).then((function(t){r.formModel.vehicles.splice(e,1)})).catch((function(e){r.$message({message:e.response.data.message,type:"error"})})):this.formModel.vehicles.splice(e,1)}}},c=r(36),component=Object(c.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{fullscreen:"",center:"",visible:e.show,title:e.formModel.id?"EDIT MEMBER":"TAMBAH MEMBER","close-on-click-modal":!1,"before-close":function(t){e.closeForm()}},on:{"update:visible":function(t){e.show=t}}},[r("el-form",{attrs:{"label-width":"150px","label-position":"left"}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{class:e.formErrors.group_member_id?"is-error":"",attrs:{label:"Group"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Group"},model:{value:e.formModel.group_member_id,callback:function(t){e.$set(e.formModel,"group_member_id",t)},expression:"formModel.group_member_id"}},e._l(e.groupMemberList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.nama}})})),1),e._v(" "),e.formErrors.group_member_id?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.group_member_id[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.nama?"is-error":"",attrs:{label:"Nama"}},[r("el-input",{attrs:{placeholder:"Nama"},model:{value:e.formModel.nama,callback:function(t){e.$set(e.formModel,"nama",t)},expression:"formModel.nama"}}),e._v(" "),e.formErrors.nama?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.nama[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.phone?"is-error":"",attrs:{label:"Nomor HP"}},[r("el-input",{attrs:{placeholder:"Nomor HP"},model:{value:e.formModel.phone,callback:function(t){e.$set(e.formModel,"phone",t)},expression:"formModel.phone"}}),e._v(" "),e.formErrors.phone?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.phone[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.nomor_kartu?"is-error":"",attrs:{label:"Nomor Kartu"}},[r("el-input",{attrs:{placeholder:"Nomor Kartu"},model:{value:e.formModel.nomor_kartu,callback:function(t){e.$set(e.formModel,"nomor_kartu",t)},expression:"formModel.nomor_kartu"}}),e._v(" "),e.formErrors.nomor_kartu?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.nomor_kartu[0])+"\n\t\t\t\t\t\t")]):e._e()],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{class:e.formErrors.register_date?"is-error":"",attrs:{label:"Tanggal Daftar"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"dd-MMM-yyyy","value-format":"yyyy-MM-dd",placeholder:"Tanggal Daftar"},model:{value:e.formModel.register_date,callback:function(t){e.$set(e.formModel,"register_date",t)},expression:"formModel.register_date"}}),e._v(" "),e.formErrors.register_date?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.register_date[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.berbayar?"is-error":"",attrs:{label:"Jenis"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Jenis"},model:{value:e.formModel.berbayar,callback:function(t){e.$set(e.formModel,"berbayar",t)},expression:"formModel.berbayar"}},e._l(["Gratis","Berbayar"],(function(e,i){return r("el-option",{key:i,attrs:{value:i,label:e}})})),1),e._v(" "),e.formErrors.berbayar?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.berbayar[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.tarif?"is-error":"",attrs:{label:"Tarif (Rp)"}},[r("el-input",{attrs:{disabled:!e.formModel.berbayar,type:"number",placeholder:"Tarif (Rp)"},model:{value:e.formModel.tarif,callback:function(t){e.$set(e.formModel,"tarif",t)},expression:"formModel.tarif"}}),e._v(" "),e.formErrors.tarif?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.tarif[0])+"\n\t\t\t\t\t\t")]):e._e()],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{class:e.formErrors.siklus_pembayaran?"is-error":"",attrs:{label:"Siklus Pembayaran"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{type:"number"},model:{value:e.formModel.siklus_pembayaran,callback:function(t){e.$set(e.formModel,"siklus_pembayaran",t)},expression:"formModel.siklus_pembayaran"}}),e._v(" "),r("el-select",{staticStyle:{width:"66%",float:"right",clear:"right"},model:{value:e.formModel.siklus_pembayaran_unit,callback:function(t){e.$set(e.formModel,"siklus_pembayaran_unit",t)},expression:"formModel.siklus_pembayaran_unit"}},e._l(e.siklus,(function(s,i){return r("el-option",{key:i,attrs:{value:s.value,label:s.label}})})),1),e._v(" "),e.formErrors.siklus_pembayaran?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.siklus_pembayaran[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{class:e.formErrors.expiry_date?"is-error":"",attrs:{label:"Tanggal Kedaluarsa"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"dd-MMM-yyyy","value-format":"yyyy-MM-dd",placeholder:"Tanggal Kedaluarsa"},model:{value:e.expiry_date,callback:function(t){e.expiry_date=t},expression:"expiry_date"}}),e._v(" "),e.formErrors.expiry_date?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.expiry_date[0])+"\n\t\t\t\t\t\t")]):e._e()],1),e._v(" "),r("el-form-item",{attrs:{label:"Status"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Status"},model:{value:e.formModel.status,callback:function(t){e.$set(e.formModel,"status",t)},expression:"formModel.status"}},e._l(["Nonaktif","Aktif"],(function(e,i){return r("el-option",{key:i,attrs:{value:i,label:e}})})),1),e._v(" "),e.formErrors.status?r("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formErrors.status[0])+"\n\t\t\t\t\t\t")]):e._e()],1)],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.formModel.vehicles,height:"calc(100vh - 433px)"}},[r("el-table-column",{attrs:{label:"Jenis Kendaraan"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"Jenis Kendaraan"},model:{value:t.row.jenis_kendaraan,callback:function(r){e.$set(t.row,"jenis_kendaraan",r)},expression:"scope.row.jenis_kendaraan"}},e._l(["MOBIL","MOTOR"],(function(e,i){return r("el-option",{key:i,attrs:{value:e,label:e}})})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Plat Nomor"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"Plat Nomor",size:"small"},model:{value:t.row.plat_nomor,callback:function(r){e.$set(t.row,"plat_nomor",r)},expression:"scope.row.plat_nomor"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Merk"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"Merk",size:"small"},model:{value:t.row.merk,callback:function(r){e.$set(t.row,"merk",r)},expression:"scope.row.merk"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Tipe"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"Tipe",size:"small"},model:{value:t.row.tipe,callback:function(r){e.$set(t.row,"tipe",r)},expression:"scope.row.tipe"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Tahun"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{type:"number",placeholder:"Tahun",size:"small"},model:{value:t.row.tahun,callback:function(r){e.$set(t.row,"tahun",r)},expression:"scope.row.tahun"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Warna"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"Warna",size:"small"},model:{value:t.row.warna,callback:function(r){e.$set(t.row,"warna",r)},expression:"scope.row.warna"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"70px",align:"right","header-align":"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger",plain:""},on:{click:function(r){return e.deleteVehicle(t.$index,t.row.id)}}})]}}])},[r("template",{slot:"header"},[r("el-button",{attrs:{disabled:e.setting.jml_kendaraan_per_kartu>0&&e.formModel.vehicles.length>=e.setting.jml_kendaraan_per_kartu,icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.addVehicle}})],1)],2)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:function(){return e.formModel.id?e.update():e.store()}}},[e._v("SIMPAN")]),e._v(" "),r("el-button",{attrs:{type:"info",icon:"el-icon-error"},on:{click:e.closeForm}},[e._v("BATAL")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);