import{e as k,a as C,b as J}from"./DMFHus-A.js";import{E as O}from"./QhF17AZW.js";import{A as $,E as I}from"./CGGPA5WY.js";import{E as U,a as F}from"./BtdZ1cBg.js";import"./Dl5G8LvW.js";import{u as G}from"./BlESuQHE.js";import"./l0sNRNKZ.js";import{u as K}from"./CcPPxmP3.js";import{t as v}from"./CbPeXI4l.js";import{h as _}from"./C5S46NFB.js";import{c as y,r as g,X as j,t as r,v as m,x as M,z as o,A as s,V as d,W as h,I as t,T as f,J as E,B as c,y as b}from"./B6udkYbz.js";const H={style:{"margin-bottom":"10px"}},W=M("h1",{class:"text-center"},"LAPORAN PER POS",-1),sa={__name:"ByPos",setup(q){const Y=G(),p=K(),R=y(()=>p.posList),D=y(()=>p.jenisKendaraanList),P=g([]),i=g(null),l=g([_().format("YYYY-MM-01"),_().format("YYYY-MM-DD")]);j(async()=>{await p.getPosList(),await p.getJenisKendaraanList()});function T(){Y("/api/reportPerPos",{params:{"dateRange[0]":l.value[0],"dateRange[1]":l.value[1],pos_id:i.value}}).then(e=>{P.value=e})}function w(){Y("/api/reportPerPos",{params:{"dateRange[0]":l.value[0],"dateRange[1]":l.value[1],pos_id:i.value}}).then(e=>{k({data:e,fileName:"Laporan Per Pos",exportType:"xls"})})}return(e,u)=>{const L=C,A=J,V=O,S=I,n=U,x=F;return r(),m(d,null,[M("div",H,[W,o(A,{modelValue:t(i),"onUpdate:modelValue":u[0]||(u[0]=a=>E(i)?i.value=a:null),placeholder:"Pos",onChange:T,style:{width:"140px","margin-right":"10px"}},{default:s(()=>[(r(!0),m(d,null,h(t(R),a=>(r(),f(L,{value:a.id,label:a.nama,key:a.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),o(V,{class:"mr-3",onChange:T,modelValue:t(l),"onUpdate:modelValue":u[1]||(u[1]=a=>E(l)?l.value=a:null),format:"DD/MMM/YYYY","value-format":"YYYY-MM-DD",type:"daterange","range-separator":"To","start-placeholder":"Dari","end-placeholder":"Sampai",style:{width:"240px","margin-right":"10px"}},null,8,["modelValue"]),o(S,{icon:"ElIconDownload"in e?e.ElIconDownload:t($),onClick:w,type:"primary"},{default:s(()=>[c(" Download ")]),_:1},8,["icon"])]),o(x,{stripe:"",border:"","show-summary":"",data:t(P),style:{width:"100%"}},{default:s(()=>[o(n,{prop:"Tanggal",label:"TANGGAL"},{default:s(({row:a})=>[c(b(t(_)(a.Tanggal).format("DD/MMM/YY")),1)]),_:1}),o(n,{prop:"Shift",label:"SHIFT"}),o(n,{prop:"Petugas",label:"PETUGAS"}),(r(!0),m(d,null,h(t(D),(a,B)=>(r(),f(n,{prop:`${a.nama}_count`,label:`${a.nama}`,align:"center","header-align":"center"},null,8,["prop","label"]))),256)),o(n,{prop:"Jumlah",label:"JUMLAH",align:"center","header-align":"center"}),(r(!0),m(d,null,h(t(D),(a,B)=>(r(),f(n,{prop:`${a.nama}_sum`,label:`${a.nama}`,align:"right","header-align":"right"},{default:s(({row:N})=>[c(b(("toRupiah"in e?e.toRupiah:t(v))(N[`${a.nama}_sum`])),1)]),_:2},1032,["prop","label"]))),256)),o(n,{prop:"Total",label:"TOTAL",align:"right","header-align":"right"},{default:s(({row:a})=>[c(b(("toRupiah"in e?e.toRupiah:t(v))(a.Total)),1)]),_:1})]),_:1},8,["data"])],64)}}};export{sa as _};
