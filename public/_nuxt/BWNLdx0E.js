import{E as Le,a as Ne}from"./vi5jNeye.js";import"./5FA1ifAs.js";import{u as re}from"./Cbl8Oibf.js";import{p as ue,r as pe,c as Ie,e as _e,d as me,m as ce,a as fe,s as be,E as ke,b as ge,f as he,g as De,h as oe,i as Me,j as Be}from"./o40-fCI4.js";import{E as Ve,a as ve,b as Ce}from"./yDEef-dC.js";import{u as ye,E as ze,a as we,b as Ae}from"./Bnx0ryQB.js";import{E as xe,a as Se,b as Pe}from"./Db9tX7fh.js";import{E as $e,a as Ee}from"./CXoCSxLa.js";import{E as Ue}from"./kkh3X4wb.js";import{v as Fe}from"./q6ePLL5X.js";import"./l0sNRNKZ.js";import{r as Ke,o as de,t as p,v as S,x as C,z as l,A as t,B as u,E as e,y as E,F as K,G as L,H as te,I as U,J as B,K as ae,c as ne,L as Ge,M as Re,N as He}from"./CVXJCMXh.js";const Oe={class:"text-right"},Je=C("br",null,null,-1),qe={class:"el-dropdown-link"},We=C("br",null,null,-1),Xe=["src"],Qe={__name:"Kamera",setup(se){const{getKameraList:y}=re(),{api:$,showForm:c,formErrors:o,formModel:k,pageSize:P,tableData:z,loading:q,currentChange:W,sizeChange:I,openForm:F,save:X,deleteData:Q,closeForm:G,requestData:R}=ye("/api/kamera"),D=Ke(!1),H=Ke(null),d=g=>{$(`/api/kamera/test/${g}`).then(n=>{H.value="data:image/jpeg;base64,"+n.snapshot,D.value=!0})};return de(()=>{R()}),(g,n)=>{const a=ke,h=Ve,f=ze,Y=ge,O=xe,M=Se,Z=Pe,j=ve,A=Ce,T=he,V=$e,x=we,N=Ae,m=Ee,i=Ue;return p(),S(U,null,[C("div",Oe,[l(a,{size:"small",icon:e(ue),onClick:n[0]||(n[0]=b=>e(F)()),type:"primary"},{default:t(()=>[u(" TAMBAH KAMERA ")]),_:1},8,["icon"])]),Je,l(j,{data:e(z).data,stripe:""},{default:t(()=>[l(h,{type:"index",index:e(z).from,label:"#"},null,8,["index"]),l(h,{width:"100",label:"Status",prop:"status",align:"center","header-align":"center"},{default:t(({row:b})=>[l(f,{effect:"dark",type:b.status?"success":"info",size:"small",style:{width:"100%"}},{default:t(()=>[u(E(b.status?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),_:1}),l(h,{width:"120",label:"Nama",prop:"nama"}),l(h,{width:"120",label:"Username",prop:"username"}),l(h,{width:"120",label:"Password",prop:"password"}),l(h,{width:"100",label:"Auth Type",prop:"auth_type"}),l(h,{"show-overflow-tooltip":"","min-width":"150",label:"Snapshot URL",prop:"snapshot_url"}),l(h,{fixed:"right",width:"60px",align:"center","header-align":"center"},{header:t(()=>[l(a,{link:"",onClick:e(R),icon:e(pe)},null,8,["onClick","icon"])]),default:t(({row:b})=>[l(Z,null,{dropdown:t(()=>[l(M,null,{default:t(()=>[l(O,{icon:e(Ie),onClick:K(r=>d(b.id),["prevent"])},{default:t(()=>[u(" Test Kamera ")]),_:2},1032,["icon","onClick"]),l(O,{icon:e(_e),onClick:K(r=>e(F)(b),["prevent"])},{default:t(()=>[u(" Edit ")]),_:2},1032,["icon","onClick"]),l(O,{icon:e(me),onClick:K(r=>e(Q)(b.id,e(y)),["prevent"])},{default:t(()=>[u(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[C("span",qe,[l(Y,null,{default:t(()=>[l(e(ce))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data"]),We,e(z).total?(p(),L(A,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(P),"page-sizes":[10,25,50,100],total:e(z).total,onCurrentChange:e(W),onSizeChange:e(I)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):te("",!0),l(i,{title:"KAMERA",modelValue:e(c),"onUpdate:modelValue":n[8]||(n[8]=b=>ae(c)?c.value=b:null),width:"600px","close-on-click-modal":!1},{footer:t(()=>[l(a,{icon:e(fe),onClick:e(G)},{default:t(()=>[u(" BATAL ")]),_:1},8,["icon","onClick"]),l(a,{icon:e(be),type:"primary",onClick:n[7]||(n[7]=b=>e(X)(e(y)))},{default:t(()=>[u(" SIMPAN ")]),_:1},8,["icon"])]),default:t(()=>[l(m,{"label-position":"left","label-width":"150px"},{default:t(()=>{var b,r,v,J,ee,le;return[l(V,{label:"Nama",error:(b=e(o).nama)==null?void 0:b.join(", ")},{default:t(()=>[l(T,{placeholder:"Nama",modelValue:e(k).nama,"onUpdate:modelValue":n[1]||(n[1]=w=>e(k).nama=w)},null,8,["modelValue"])]),_:1},8,["error"]),l(V,{label:"Username",error:(r=e(o).username)==null?void 0:r.join(", ")},{default:t(()=>[l(T,{placeholder:"Username",modelValue:e(k).username,"onUpdate:modelValue":n[2]||(n[2]=w=>e(k).username=w)},null,8,["modelValue"])]),_:1},8,["error"]),l(V,{label:"Password",error:(v=e(o).password)==null?void 0:v.join(", ")},{default:t(()=>[l(T,{placeholder:"Password",modelValue:e(k).password,"onUpdate:modelValue":n[3]||(n[3]=w=>e(k).password=w)},null,8,["modelValue"])]),_:1},8,["error"]),l(V,{label:"Otentifikasi",error:(J=e(o).auth_type)==null?void 0:J.join(", ")},{default:t(()=>[l(N,{modelValue:e(k).auth_type,"onUpdate:modelValue":n[4]||(n[4]=w=>e(k).auth_type=w),placeholder:"Otentifikasi",style:{width:"100%"}},{default:t(()=>[(p(),S(U,null,B(["basic","digest"],(w,_)=>l(x,{value:w,label:w,key:_},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(V,{label:"URL Snapshot",error:(ee=e(o).snapshot_url)==null?void 0:ee.join(", ")},{default:t(()=>[l(T,{placeholder:"URL Snapshot",modelValue:e(k).snapshot_url,"onUpdate:modelValue":n[5]||(n[5]=w=>e(k).snapshot_url=w)},null,8,["modelValue"])]),_:1},8,["error"]),l(V,{label:"Status",error:(le=e(o).status)==null?void 0:le.join(", ")},{default:t(()=>[l(N,{modelValue:e(k).status,"onUpdate:modelValue":n[6]||(n[6]=w=>e(k).status=w),placeholder:"Status",style:{width:"100%"}},{default:t(()=>[(p(),S(U,null,B(["Tidak Aktif","Aktif"],(w,_)=>l(x,{value:_,label:w,key:_},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue"]),l(i,{title:"SNAPSHOT KAMERA",center:"",modelValue:e(D),"onUpdate:modelValue":n[9]||(n[9]=b=>ae(D)?D.value=b:null)},{default:t(()=>[C("img",{src:e(H),alt:"",style:{width:"100%"}},null,8,Xe)]),_:1},8,["modelValue"])],64)}}},Ye={class:"text-right"},Ze=C("br",null,null,-1),el={class:"el-dropdown-link"},ll=C("br",null,null,-1),tl={__name:"Printer",setup(se){const{getPrinterList:y}=re(),{api:$,showForm:c,formErrors:o,formModel:k,pageSize:P,tableData:z,loading:q,currentChange:W,sizeChange:I,openForm:F,save:X,deleteData:Q,closeForm:G,requestData:R}=ye("/api/printer"),D=H=>{$(`/api/printer/test/${H}`).then(d=>{oe({message:d.message,type:"success"})})};return de(()=>{R()}),(H,d)=>{const g=ke,n=Ve,a=ze,h=ge,f=xe,Y=Se,O=Pe,M=ve,Z=Ce,j=he,A=$e,T=we,V=Ae,x=Ee,N=Ue;return p(),S(U,null,[C("div",Ye,[l(g,{size:"small",icon:e(ue),onClick:d[0]||(d[0]=m=>e(F)()),type:"primary"},{default:t(()=>[u(" TAMBAH PRINTER ")]),_:1},8,["icon"])]),Ze,l(M,{data:e(z).data,stripe:""},{default:t(()=>[l(n,{type:"index",index:e(z).from,label:"#"},null,8,["index"]),l(n,{width:"100",label:"Status",prop:"status"},{default:t(({row:m})=>[l(a,{effect:"dark",type:m.status?"success":"info",size:"small",style:{width:"100%"}},{default:t(()=>[u(E(m.status?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),_:1}),l(n,{"min-width":"100",label:"Nama",prop:"nama"}),l(n,{"min-width":"100",label:"IP Address",prop:"ip_address"}),l(n,{"min-width":"100",label:"Port",prop:"port"}),l(n,{fixed:"right",width:"60px",align:"center","header-align":"center"},{header:t(()=>[l(g,{link:"",onClick:e(R),icon:e(pe)},null,8,["onClick","icon"])]),default:t(({row:m})=>[l(O,null,{dropdown:t(()=>[l(Y,null,{default:t(()=>[l(f,{icon:e(De),onClick:K(i=>D(m.id),["prevent"])},{default:t(()=>[u(" Test Printer ")]),_:2},1032,["icon","onClick"]),l(f,{icon:e(_e),onClick:K(i=>e(F)(m),["prevent"])},{default:t(()=>[u(" Edit ")]),_:2},1032,["icon","onClick"]),l(f,{icon:e(me),onClick:K(i=>e(Q)(m.id),["prevent"])},{default:t(()=>[u(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[C("span",el,[l(h,null,{default:t(()=>[l(e(ce))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data"]),ll,e(z).total?(p(),L(Z,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(P),"page-sizes":[10,25,50,100],total:e(z).total,onCurrentChange:e(W),onSizeChange:e(I)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):te("",!0),l(N,{title:"PRINTER",modelValue:e(c),"onUpdate:modelValue":d[6]||(d[6]=m=>ae(c)?c.value=m:null),width:"500px","close-on-click-modal":!1},{footer:t(()=>[l(g,{icon:e(fe),onClick:e(G)},{default:t(()=>[u(" BATAL ")]),_:1},8,["icon","onClick"]),l(g,{icon:e(be),type:"primary",onClick:d[5]||(d[5]=m=>e(X)(e(y)))},{default:t(()=>[u(" SIMPAN ")]),_:1},8,["icon"])]),default:t(()=>[l(x,{"label-position":"left","label-width":"150px"},{default:t(()=>{var m,i,b,r;return[l(A,{label:"Nama",error:(m=e(o).nama)==null?void 0:m.join(", ")},{default:t(()=>[l(j,{placeholder:"Nama",modelValue:e(k).nama,"onUpdate:modelValue":d[1]||(d[1]=v=>e(k).nama=v)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Alamat IP",error:(i=e(o).ip_address)==null?void 0:i.join(", ")},{default:t(()=>[l(j,{placeholder:"Alamat IP",modelValue:e(k).ip_address,"onUpdate:modelValue":d[2]||(d[2]=v=>e(k).ip_address=v)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Port",error:(b=e(o).port)==null?void 0:b.join(", ")},{default:t(()=>[l(j,{placeholder:"Port",modelValue:e(k).port,"onUpdate:modelValue":d[3]||(d[3]=v=>e(k).port=v)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Status",error:(r=e(o).status)==null?void 0:r.join(", ")},{default:t(()=>[l(V,{modelValue:e(k).status,"onUpdate:modelValue":d[4]||(d[4]=v=>e(k).status=v),placeholder:"Status",style:{width:"100%"}},{default:t(()=>[(p(),S(U,null,B(["Tidak Aktif","Aktif"],(v,J)=>l(T,{value:J,label:v,key:J},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue"])],64)}}},ol={class:"text-right"},nl=C("br",null,null,-1),al={class:"el-dropdown-link"},rl=C("br",null,null,-1),dl={__name:"Pos",setup(se){const y=re(),{showForm:$,formErrors:c,formModel:o,pageSize:k,tableData:P,loading:z,currentChange:q,sizeChange:W,openForm:I,save:F,deleteData:X,closeForm:Q,requestData:G,refreshData:R}=ye("/api/pos"),D=ne(()=>y.printerList),H=()=>{y.getPosList(),y.getPos()};return de(()=>{G()}),(d,g)=>{const n=ke,a=Ve,h=ge,f=xe,Y=Se,O=Pe,M=ve,Z=Ce,j=he,A=$e,T=we,V=Ae,x=Ee,N=Ue;return p(),S(U,null,[C("div",ol,[l(n,{size:"small",icon:e(ue),onClick:g[0]||(g[0]=m=>e(I)()),type:"primary"},{default:t(()=>[u(" TAMBAH POS ")]),_:1},8,["icon"])]),nl,l(M,{data:e(P).data,stripe:""},{default:t(()=>[l(a,{type:"index",index:e(P).from,label:"#"},null,8,["index"]),l(a,{"min-width":"100",label:"Nama",prop:"nama"}),l(a,{"min-width":"100",label:"IP Address",prop:"ip_address"}),l(a,{"min-width":"100",label:"Printer",prop:"printer.nama"}),l(a,{fixed:"right",width:"60px","header-align":"center",align:"center"},{header:t(()=>[l(n,{link:"",onClick:e(R),icon:e(pe)},null,8,["onClick","icon"])]),default:t(({row:m})=>[l(O,null,{dropdown:t(()=>[l(Y,null,{default:t(()=>[l(f,{icon:e(_e),onClick:K(i=>e(I)(m),["prevent"])},{default:t(()=>[u(" Edit ")]),_:2},1032,["icon","onClick"]),l(f,{icon:e(me),onClick:K(i=>e(X)(m.id,H),["prevent"])},{default:t(()=>[u(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[C("span",al,[l(h,null,{default:t(()=>[l(e(ce))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data"]),rl,e(P).total?(p(),L(Z,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(k),"page-sizes":[10,25,50,100],total:e(P).total,onCurrentChange:e(q),onSizeChange:e(W)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):te("",!0),l(N,{title:"POS",modelValue:e($),"onUpdate:modelValue":g[5]||(g[5]=m=>ae($)?$.value=m:null),width:"500px","close-on-click-modal":!1},{footer:t(()=>[l(n,{icon:e(fe),onClick:e(Q)},{default:t(()=>[u(" BATAL ")]),_:1},8,["icon","onClick"]),l(n,{icon:e(be),type:"primary",onClick:g[4]||(g[4]=m=>e(F)(H))},{default:t(()=>[u(" SIMPAN ")]),_:1},8,["icon"])]),default:t(()=>[l(x,{"label-position":"left","label-width":"150px"},{default:t(()=>{var m,i,b;return[l(A,{label:"Nama",error:(m=e(c).nama)==null?void 0:m.join(", ")},{default:t(()=>[l(j,{placeholder:"Nama",modelValue:e(o).nama,"onUpdate:modelValue":g[1]||(g[1]=r=>e(o).nama=r)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Alamat IP",error:(i=e(c).ip_address)==null?void 0:i.join(", ")},{default:t(()=>[l(j,{placeholder:"Alamat IP",modelValue:e(o).ip_address,"onUpdate:modelValue":g[2]||(g[2]=r=>e(o).ip_address=r)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Printer",error:(b=e(c).printer_id)==null?void 0:b.join(", ")},{default:t(()=>[l(V,{modelValue:e(o).printer_id,"onUpdate:modelValue":g[3]||(g[3]=r=>e(o).printer_id=r),placeholder:"Printer",style:{width:"100%"}},{default:t(()=>[(p(!0),S(U,null,B(e(D),r=>(p(),L(T,{value:r.id,label:r.nama,key:r.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue"])],64)}}},sl={class:"text-right"},il=C("br",null,null,-1),ul={key:0},pl={key:1},_l={key:2},ml={class:"el-dropdown-link"},cl=C("br",null,null,-1),fl={__name:"GateIn",setup(se){const y=re(),{showForm:$,formErrors:c,formModel:o,pageSize:k,tableData:P,loading:z,currentChange:q,sizeChange:W,openForm:I,save:F,deleteData:X,closeForm:Q,requestData:G}=ye("/api/gateIn"),R=ne(()=>y.printerList),D=ne(()=>y.kameraList);return de(()=>{G()}),(H,d)=>{const g=ke,n=Ve,a=ze,h=ge,f=xe,Y=Se,O=Pe,M=ve,Z=Ce,j=he,A=$e,T=we,V=Ae,x=Ee,N=Ue,m=Fe;return p(),S(U,null,[C("div",sl,[l(g,{size:"small",icon:e(ue),onClick:d[0]||(d[0]=i=>e(I)()),type:"primary"},{default:t(()=>[u(" TAMBAH GATE MASUK ")]),_:1},8,["icon"])]),il,Ge((p(),L(M,{data:e(P).data},{default:t(()=>[l(n,{prop:"shortcut_key",label:"#","min-width":"30px",align:"center","header-align":"center"}),l(n,{width:"100",label:"Status",prop:"status"},{default:t(({row:i})=>[l(a,{effect:"dark",type:i.status?"success":"info",size:"small",style:{width:"100%"}},{default:t(()=>[u(E(i.status?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),_:1}),l(n,{prop:"nama",label:"Nama","min-width":"100px"}),l(n,{prop:"jenis_kendaraan",label:"Jenis Kendaraan","min-width":"130px","show-overflow-tooltip":""}),l(n,{prop:"controller_ip_address",label:"Controller","min-width":"150px","show-overflow-tooltip":""},{default:t(({row:i})=>[i.controller_ip_address?(p(),S("span",ul,E(i.controller_ip_address)+":"+E(i.controller_port),1)):te("",!0),i.controller_ip_address?(p(),S("br",pl)):te("",!0),i.controller_device?(p(),S("span",_l,E(i.controller_device)+":"+E(i.controller_baudrate),1)):te("",!0)]),_:1}),l(n,{"min-width":"150",label:"Printer",prop:"printer.nama"}),l(n,{"min-width":"150",label:"Kamera"},{default:t(({row:i})=>[u(E(i.kameraList?i.kameraList.map(b=>b.nama).join(","):""),1)]),_:1}),l(n,{fixed:"right",width:"60px",align:"center","header-align":"center"},{header:t(()=>[l(g,{link:"",onClick:e(G),icon:e(pe)},null,8,["onClick","icon"])]),default:t(({row:i})=>[l(O,null,{dropdown:t(()=>[l(Y,null,{default:t(()=>[l(f,{icon:e(_e),onClick:K(b=>e(I)(i),["prevent"])},{default:t(()=>[u(" Edit ")]),_:2},1032,["icon","onClick"]),l(f,{icon:e(me),onClick:K(b=>e(X)(i.id,e(y).getGateInList),["prevent"])},{default:t(()=>[u(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[C("span",ml,[l(h,null,{default:t(()=>[l(e(ce))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[m,e(z)]]),cl,e(P).total?(p(),L(Z,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(k),"page-sizes":[10,25,50,100],total:e(P).total,onCurrentChange:e(q),onSizeChange:e(W)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):te("",!0),l(N,{title:"GATE MASUK",modelValue:e($),"onUpdate:modelValue":d[10]||(d[10]=i=>ae($)?$.value=i:null),width:"500px","close-on-click-modal":!1},{footer:t(()=>[l(g,{icon:e(fe),onClick:e(Q)},{default:t(()=>[u(" BATAL ")]),_:1},8,["icon","onClick"]),l(g,{icon:e(be),type:"primary",onClick:d[9]||(d[9]=i=>e(F)(e(y).getGateInList))},{default:t(()=>[u(" SIMPAN ")]),_:1},8,["icon"])]),default:t(()=>[l(x,{"label-position":"left","label-width":"150px"},{default:t(()=>{var i,b,r,v,J,ee,le,w;return[l(A,{label:"Nama",error:(i=e(c).nama)==null?void 0:i.join(", ")},{default:t(()=>[l(j,{placeholder:"Nama",modelValue:e(o).nama,"onUpdate:modelValue":d[1]||(d[1]=_=>e(o).nama=_)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Shortcut Key",error:(b=e(c).shortcut_key)==null?void 0:b.join(", ")},{default:t(()=>[l(j,{maxlength:"1",placeholder:"Shortcut Key",modelValue:e(o).shortcut_key,"onUpdate:modelValue":d[2]||(d[2]=_=>e(o).shortcut_key=_)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Jenis Kendaraan",error:(r=e(c).jenis_kendaraan)==null?void 0:r.join(", ")},{default:t(()=>[l(j,{placeholder:"Jenis Kendaraan",modelValue:e(o).jenis_kendaraan,"onUpdate:modelValue":d[3]||(d[3]=_=>e(o).jenis_kendaraan=_)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Alamat IP Kontroler",error:(v=e(c).controller_ip_address)==null?void 0:v.join(", ")},{default:t(()=>[l(j,{placeholder:"Alamat IP Kontroler",modelValue:e(o).controller_ip_address,"onUpdate:modelValue":d[4]||(d[4]=_=>e(o).controller_ip_address=_)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Port Kontroler",error:(J=e(c).controller_port)==null?void 0:J.join(", ")},{default:t(()=>[l(j,{type:"number",placeholder:"Port Kontroler",modelValue:e(o).controller_port,"onUpdate:modelValue":d[5]||(d[5]=_=>e(o).controller_port=_)},null,8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Printer",error:(ee=e(c).printer_id)==null?void 0:ee.join(", ")},{default:t(()=>[l(V,{modelValue:e(o).printer_id,"onUpdate:modelValue":d[6]||(d[6]=_=>e(o).printer_id=_),placeholder:"Printer",style:{width:"100%"}},{default:t(()=>[(p(!0),S(U,null,B(e(R),_=>(p(),L(T,{value:_.id,label:_.nama,key:_.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Kamera",error:(le=e(c).kamera)==null?void 0:le.join(", ")},{default:t(()=>[l(V,{modelValue:e(o).kamera,"onUpdate:modelValue":d[7]||(d[7]=_=>e(o).kamera=_),placeholder:"Kamera",style:{width:"100%"},multiple:""},{default:t(()=>[(p(!0),S(U,null,B(e(D),_=>(p(),L(T,{value:_.id,label:_.nama,key:_.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(A,{label:"Status",error:(w=e(c).status)==null?void 0:w.join(", ")},{default:t(()=>[l(V,{modelValue:e(o).status,"onUpdate:modelValue":d[8]||(d[8]=_=>e(o).status=_),placeholder:"Status",style:{width:"100%"}},{default:t(()=>[(p(),S(U,null,B(["Tidak Aktif","Aktif"],(_,ie)=>l(T,{value:ie,label:_,key:ie},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue"])],64)}}},bl={class:"text-right"},kl=C("br",null,null,-1),gl={class:"el-dropdown-link"},hl=C("br",null,null,-1),Vl={class:"flex"},vl={class:"flex"},Cl={class:"flex"},yl={__name:"GateOut",setup(se){const y=re(),{showForm:$,formErrors:c,formModel:o,pageSize:k,tableData:P,loading:z,currentChange:q,sizeChange:W,openForm:I,save:F,deleteData:X,closeForm:Q,requestData:G}=ye("/api/gateOut"),R=ne(()=>y.jenisKendaraanList),D=ne(()=>y.kameraList),H=ne(()=>y.posList);Re(async()=>{await y.getPosList()}),de(()=>{G()});const d=n=>{console.log(`connecting to ${n.pos.ip_address}:5678`);const a=new WebSocket(`ws://${n.pos.ip_address}:5678/`);a.onerror=h=>{oe({message:"KONEKSI KE POS GAGAL",type:"error"})},a.onopen=h=>{console.log(`connected to ${n.pos.ip_address}:5678`),a.send(["open",n.device,n.baudrate,n.open_command,n.close_command].join(";"))},a.onmessage=h=>{let f=JSON.parse(h.data);oe({message:f.message,type:f.status?"success":"error"}),a.close()}},g=n=>{if(!n.running_text_device||!n.running_text_baudrate){oe({message:"RUNNING TEXT TIDAK TERPASANG",type:"error"});return}console.log(`connecting to ${n.pos.ip_address}:5678`);const a=new WebSocket(`ws://${n.pos.ip_address}:5678/`);a.onerror=h=>{oe({message:"KONEKSI KE POS GAGAL",type:"error"})},a.onopen=h=>{console.log(`connected to ${n.pos.ip_address}:5678`),a.send(["rt",n.running_text_device,n.running_text_baudrate,`TEST|${n.nama}`].join(";"))},a.onmessage=h=>{let f=JSON.parse(h.data);oe({message:f.message,type:f.status?"success":"error"}),a.close()}};return(n,a)=>{const h=ke,f=Ve,Y=ze,O=ge,M=xe,Z=Se,j=Pe,A=ve,T=Ce,V=he,x=$e,N=we,m=Ae,i=Ee,b=Ue;return p(),S(U,null,[C("div",bl,[l(h,{size:"small",icon:e(ue),onClick:a[0]||(a[0]=r=>e(I)()),type:"primary"},{default:t(()=>[u(" TAMBAH GATE KELUAR ")]),_:1},8,["icon"])]),kl,l(A,{data:e(P).data,stripe:""},{default:t(()=>[l(f,{type:"index",index:e(P).from,label:"#"},null,8,["index"]),l(f,{"min-width":"100",label:"Status",prop:"status"},{default:t(({row:r})=>[l(Y,{effect:"dark",type:r.status?"success":"info",size:"small",style:{width:"100%"}},{default:t(()=>[u(E(r.status?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),_:1}),l(f,{"min-width":"150",label:"Nama",prop:"nama"}),l(f,{prop:"shortcut_key",label:"Shortcut",align:"center","header-align":"center","min-width":"100"}),l(f,{"min-width":"100",label:"Pos",prop:"pos.nama"}),l(f,{"min-width":"150",label:"Jenis Kendaraan",prop:"jenis_kendaraan"},{default:t(({row:r})=>[u(E(r.jenis_kendaraan?r.jenis_kendaraan.join(", "):""),1)]),_:1}),l(f,{"min-width":"150",label:"Controller Device"},{default:t(({row:r})=>[u(E(r.device)+":"+E(r.baudrate),1)]),_:1}),l(f,{"min-width":"130",label:"Perintah Buka",prop:"open_command"}),l(f,{"min-width":"130",label:"Perintah Tutup",prop:"close_command"}),l(f,{"min-width":"200",label:"UHF Reader"},{default:t(({row:r})=>[u(E(r.uhf_reader_host||"-")+":"+E(r.uhf_reader_port||"-"),1)]),_:1}),l(f,{"min-width":"200",label:"Running Text Device"},{default:t(({row:r})=>[u(E(r.running_text_device)+":"+E(r.running_text_baudrate),1)]),_:1}),l(f,{"min-width":"150",label:"Kamera"},{default:t(({row:r})=>[u(E(r.kameraList?r.kameraList.map(v=>v.nama).join(","):""),1)]),_:1}),l(f,{fixed:"right",width:"60px",align:"center","header-align":"center"},{header:t(()=>[l(h,{link:"",onClick:e(G),icon:e(pe)},null,8,["onClick","icon"])]),default:t(({row:r})=>[l(j,null,{dropdown:t(()=>[l(Z,null,{default:t(()=>[l(M,{icon:e(Me),onClick:K(v=>d(r),["prevent"])},{default:t(()=>[u("Test Gate")]),_:2},1032,["icon","onClick"]),l(M,{icon:e(Be),onClick:K(v=>g(r),["prevent"])},{default:t(()=>[u(" Test Running Text ")]),_:2},1032,["icon","onClick"]),l(M,{icon:e(_e),onClick:K(v=>e(I)(r),["prevent"])},{default:t(()=>[u(" Edit ")]),_:2},1032,["icon","onClick"]),l(M,{icon:e(me),onClick:K(v=>e(X)(r.id,e(y).getGateInList),["prevent"])},{default:t(()=>[u(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[C("span",gl,[l(O,null,{default:t(()=>[l(e(ce))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data"]),hl,e(P).total?(p(),L(T,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(k),"page-sizes":[10,25,50,100],total:e(P).total,onCurrentChange:e(q),onSizeChange:e(W)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):te("",!0),l(b,{title:"GATE KELUAR",modelValue:e($),"onUpdate:modelValue":a[16]||(a[16]=r=>ae($)?$.value=r:null),width:"500px","close-on-click-modal":!1},{footer:t(()=>[l(h,{icon:e(fe),onClick:e(Q)},{default:t(()=>[u(" BATAL ")]),_:1},8,["icon","onClick"]),l(h,{icon:e(be),type:"primary",onClick:a[15]||(a[15]=r=>e(F)(e(y).getGateInList))},{default:t(()=>[u(" SIMPAN ")]),_:1},8,["icon"])]),default:t(()=>[l(i,{"label-position":"left","label-width":"150px"},{default:t(()=>{var r,v,J,ee,le,w,_,ie,je;return[l(x,{label:"Nama",error:(r=e(c).nama)==null?void 0:r.join(", ")},{default:t(()=>[l(V,{placeholder:"Nama",modelValue:e(o).nama,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).nama=s)},null,8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Shortcut Key",error:(v=e(c).shortcut_key)==null?void 0:v.join(", ")},{default:t(()=>[l(V,{placeholder:"Shortcut Key",modelValue:e(o).shortcut_key,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).shortcut_key=s)},null,8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Jenis Kendaraan",error:(J=e(c).jenis_kendaraan)==null?void 0:J.join(", ")},{default:t(()=>[l(m,{modelValue:e(o).jenis_kendaraan,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).jenis_kendaraan=s),placeholder:"Jenis Kendaraan",style:{width:"100%"},multiple:""},{default:t(()=>[(p(!0),S(U,null,B(e(R),s=>(p(),L(N,{value:s.nama,label:s.nama,key:s.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Controller",error:(ee=e(c).device)==null?void 0:ee.join(", ")},{default:t(()=>[C("div",Vl,[l(V,{class:"mr-2",placeholder:"Device",modelValue:e(o).device,"onUpdate:modelValue":a[4]||(a[4]=s=>e(o).device=s)},null,8,["modelValue"]),l(V,{type:"number",placeholder:"Baudrate",modelValue:e(o).baudrate,"onUpdate:modelValue":a[5]||(a[5]=s=>e(o).baudrate=s)},null,8,["modelValue"])])]),_:1},8,["error"]),l(x,{label:"UHF Reader"},{default:t(()=>[C("div",vl,[l(V,{class:"mr-2",placeholder:"IP Address",modelValue:e(o).uhf_reader_host,"onUpdate:modelValue":a[6]||(a[6]=s=>e(o).uhf_reader_host=s)},null,8,["modelValue"]),l(V,{type:"number",placeholder:"Port",modelValue:e(o).uhf_reader_port,"onUpdate:modelValue":a[7]||(a[7]=s=>e(o).uhf_reader_port=s)},null,8,["modelValue"])])]),_:1}),l(x,{label:"Running Text"},{default:t(()=>[C("div",Cl,[l(V,{class:"mr-2",placeholder:"Device",modelValue:e(o).running_text_device,"onUpdate:modelValue":a[8]||(a[8]=s=>e(o).running_text_device=s)},null,8,["modelValue"]),l(V,{type:"number",placeholder:"Baudrate",modelValue:e(o).running_text_baudrate,"onUpdate:modelValue":a[9]||(a[9]=s=>e(o).running_text_baudrate=s)},null,8,["modelValue"])])]),_:1}),l(x,{label:"Perintah Buka",error:(le=e(c).open_command)==null?void 0:le.join(", ")},{default:t(()=>[l(V,{placeholder:"Perintah Buka",modelValue:e(o).open_command,"onUpdate:modelValue":a[10]||(a[10]=s=>e(o).open_command=s)},null,8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Perintah Tutup",error:(w=e(c).close_command)==null?void 0:w.join(", ")},{default:t(()=>[l(V,{placeholder:"Perintah Tutup",modelValue:e(o).close_command,"onUpdate:modelValue":a[11]||(a[11]=s=>e(o).close_command=s)},null,8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Pos",error:(_=e(c).pos_id)==null?void 0:_.join(", ")},{default:t(()=>[l(m,{modelValue:e(o).pos_id,"onUpdate:modelValue":a[12]||(a[12]=s=>e(o).pos_id=s),placeholder:"Pos",style:{width:"100%"}},{default:t(()=>[(p(!0),S(U,null,B(e(H),s=>(p(),L(N,{value:s.id,label:s.nama,key:s.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Kamera",error:(ie=e(c).kamera)==null?void 0:ie.join(", ")},{default:t(()=>[l(m,{modelValue:e(o).kamera,"onUpdate:modelValue":a[13]||(a[13]=s=>e(o).kamera=s),placeholder:"Kamera",style:{width:"100%"},multiple:""},{default:t(()=>[(p(!0),S(U,null,B(e(D),s=>(p(),L(N,{value:s.id,label:s.nama,key:s.id},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),l(x,{label:"Status",error:(je=e(c).status)==null?void 0:je.join(", ")},{default:t(()=>[l(m,{modelValue:e(o).status,"onUpdate:modelValue":a[14]||(a[14]=s=>e(o).status=s),placeholder:"Status",style:{width:"100%"}},{default:t(()=>[(p(),S(U,null,B(["Tidak Aktif","Aktif"],(s,Te)=>l(N,{value:Te,label:s,key:Te},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue"])],64)}}},Ll={__name:"device",setup(se){const y=re(),$=[{label:"Kamera",component:Qe},{label:"Printer",component:tl},{label:"Pos",component:dl},{label:"Gate Keluar",component:yl},{label:"Gate Masuk",component:fl}];return de(async()=>{await y.getKameraList(),await y.getPrinterList()}),(c,o)=>{const k=Le,P=Ne;return p(),L(P,null,{default:t(()=>[(p(),S(U,null,B($,(z,q)=>l(k,{lazy:"",key:q,label:z.label.toUpperCase()},{default:t(()=>[(p(),L(He(z.component)))]),_:2},1032,["label"])),64))]),_:1})}}};export{Ll as default};
