(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{460:function(t,o,r){"use strict";r.r(o);r(10);var l={data:function(){return{showForm:!1,formErrors:{},formModel:{},keyword:"",tableData:[],loading:!1}},methods:{openForm:function(data){this.formErrors={},this.formModel=JSON.parse(JSON.stringify(data)),this.showForm=!0},store:function(){var e=this;this.loading=!0,axios.post("/user",this.formModel).then((function(t){e.showForm=!1,e.$message({message:t.data.message,type:"success"}),e.requestData()})).catch((function(t){422==t.response.status&&(e.formErrors=t.response.data.errors),500==t.response.status&&(e.formErrors={}),e.$message({message:t.response.data.message,type:"error"})})).finally((function(){e.loading=!1}))},update:function(){var e=this;this.loading=!0,axios.put("/user/"+this.formModel.id,this.formModel).then((function(t){e.showForm=!1,e.$message({message:t.data.message,type:"success"}),e.requestData()})).catch((function(t){422==t.response.status&&(e.formErrors=t.response.data.errors),500==t.response.status&&(e.formErrors={}),e.$message({message:t.response.data.message,type:"error"})})).finally((function(){e.loading=!1}))},deleteData:function(t){var o=this;this.$confirm("Anda yakin akan menghapus data ini?","Warning",{type:"warning"}).then((function(){axios.delete("/user/"+t).then((function(e){o.requestData(),o.$message({message:e.data.message,type:"success"})})).catch((function(e){o.$message({message:e.response.data.message,type:"error"})}))})).catch((function(){return console.log(e)}))},requestData:function(){var e=this,t={keyword:this.keyword};this.loading=!0,axios.get("/user",{params:t}).then((function(t){e.tableData=t.data})).catch((function(t){e.loading=!1,e.$message({message:t.response.data.message,type:"error"})})).finally((function(){return e.loading=!1}))}},mounted:function(){this.requestData()}},n=r(36),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"flex flex-row"},[o("div",{staticClass:"text-lg text-blue-700 flex-grow"},[e._v("KELOLA USER")]),e._v(" "),o("el-form",{staticClass:"text-right",attrs:{inline:""},nativeOn:{submit:function(e){return e.preventDefault(),function(){}.apply(null,arguments)}}},[o("el-form-item",[o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openForm({role:0,password:""})}}},[e._v("TAMBAH USER")])],1),e._v(" "),o("el-form-item",[o("el-input",{attrs:{size:"small",placeholder:"Cari","prefix-icon":"el-icon-search",clearable:!0},on:{change:function(t){e.keyword=t,e.requestData()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,stripe:"",height:"calc(100vh - 165px)"}},[o("el-table-column",{attrs:{prop:"name",label:"Nama",sortable:"custom"}}),e._v(" "),o("el-table-column",{attrs:{prop:"role",label:"Level",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(t.row.role?"Admin":"Operator")+"\n\t\t\t\t")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"Status",sortable:"custom",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{size:"mini",type:t.row.status?"success":"info"}},[e._v(e._s(t.row.status?"Aktif":"Nonaktif"))])]}}])}),e._v(" "),o("el-table-column",{attrs:{width:"40px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-dropdown",[o("span",{staticClass:"el-dropdown-link"},[o("i",{staticClass:"el-icon-more"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{icon:"el-icon-edit-outline"},nativeOn:{click:function(o){return o.preventDefault(),e.openForm(t.row)}}},[e._v("Edit")]),e._v(" "),o("el-dropdown-item",{attrs:{icon:"el-icon-delete"},nativeOn:{click:function(o){return o.preventDefault(),e.deleteData(t.row.id)}}},[e._v("Hapus")])],1)],1)]}}])},[o("template",{slot:"header"},[o("el-button",{staticClass:"text-white",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:function(){e.keyword="",e.requestData()}}})],1)],2)],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{visible:e.showForm,title:e.formModel.id?"EDIT USER":"TAMBAH USER",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.showForm=t}}},[o("el-form",{attrs:{"label-width":"160px","label-position":"left"}},[o("el-form-item",{class:e.formErrors.name?"is-error":"",attrs:{label:"Nama"}},[o("el-input",{attrs:{placeholder:"Nama"},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}}),e._v(" "),e.formErrors.name?o("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t"+e._s(e.formErrors.name[0])+"\n\t\t\t\t\t")]):e._e()],1),e._v(" "),o("el-form-item",{class:e.formErrors.role?"is-error":"",attrs:{label:"Level"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Level"},model:{value:e.formModel.role,callback:function(t){e.$set(e.formModel,"role",t)},expression:"formModel.role"}},e._l([{value:0,label:"Operator"},{value:1,label:"Admin"}],(function(e,i){return o("el-option",{key:i,attrs:{value:e.value,label:e.label}})})),1),e._v(" "),e.formErrors.type?o("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t"+e._s(e.formErrors.role[0])+"\n\t\t\t\t\t")]):e._e()],1),e._v(" "),o("el-form-item",{class:e.formErrors.password?"is-error":"",attrs:{label:"Password"}},[o("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.formModel.password,callback:function(t){e.$set(e.formModel,"password",t)},expression:"formModel.password"}}),e._v(" "),e.formErrors.password?o("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t"+e._s(e.formErrors.password[0])+"\n\t\t\t\t\t")]):e._e()],1),e._v(" "),o("el-form-item",{class:e.formErrors.password?"is-error":"",attrs:{label:"Konfirmasi Password"}},[o("el-input",{attrs:{type:"password",placeholder:"Konfirmasi Password"},model:{value:e.formModel.password_confirmation,callback:function(t){e.$set(e.formModel,"password_confirmation",t)},expression:"formModel.password_confirmation"}})],1),e._v(" "),o("el-form-item",{class:e.formErrors.status?"is-error":"",attrs:{label:"Status"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},model:{value:e.formModel.status,callback:function(t){e.$set(e.formModel,"status",t)},expression:"formModel.status"}}),e._v(" "),o("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:e.formModel.status?"success":"info",size:"small"}},[e._v(e._s(e.formModel.status?"Aktif":"Nonaktif"))]),e._v(" "),e.formErrors.status?o("div",{staticClass:"el-form-item__error"},[e._v("\n\t\t\t\t\t\t"+e._s(e.formErrors.status[0])+"\n\t\t\t\t\t")]):e._e()],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:function(){return e.formModel.id?e.update():e.store()}}},[e._v("SIMPAN")]),e._v(" "),o("el-button",{attrs:{type:"info",icon:"el-icon-error"},on:{click:function(t){e.showForm=!1}}},[e._v("BATAL")])],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports}}]);