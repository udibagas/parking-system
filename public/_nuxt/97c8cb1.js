(window.webpackJsonp=window.webpackJsonp||[]).push([[37,11],{386:function(t,e,r){"use strict";r.r(e);r(38),r(28),r(37),r(48),r(27),r(49);var n=r(14),o=r(42);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var c={props:["show"],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["printerList"])),data:function(){return{printer_id:null}},mounted:function(){this.$store.commit("getPrinterList")}},f=r(36),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:"PILIH PRINTER",center:"",visible:t.show,width:"500px","before-close":function(e){t.$emit("close")}},on:{"update:visible":function(e){t.show=e}}},[r("el-form",[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Pilih Printer"},model:{value:t.printer_id,callback:function(e){t.printer_id=e},expression:"printer_id"}},t._l(t.printerList,(function(p){return r("el-option",{key:p.id,attrs:{value:p.id,label:p.nama}})})),1)],1)],1),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{icon:"el-icon-close",type:"info"},on:{click:function(e){return t.$emit("close")}}},[t._v("\n\t\t\tBATAL\n\t\t")]),t._v(" "),r("el-button",{attrs:{icon:"el-icon-printer",type:"primary",disabled:!t.printer_id},on:{click:function(e){return t.$emit("print",t.printer_id)}}},[t._v("\n\t\t\tCETAK STRUK\n\t\t")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},387:function(t,e,r){"use strict";var n=r(11),o=r(6),l=r(119),c=r(17),f=r(12),m=r(52),d=r(250),h=r(87),v=r(249),y=r(4),_=r(68),w=r(88).f,N=r(39).f,O=r(16).f,P=r(389).trim,I="Number",R=o.Number,E=R.prototype,D=m(_(E))==I,S=function(t){if(h(t))throw TypeError("Cannot convert a Symbol value to a number");var e,r,n,o,l,c,f,code,m=v(t,"number");if("string"==typeof m&&m.length>2)if(43===(e=(m=P(m)).charCodeAt(0))||45===e){if(88===(r=m.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(m.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+m}for(c=(l=m.slice(2)).length,f=0;f<c;f++)if((code=l.charCodeAt(f))<48||code>o)return NaN;return parseInt(l,n)}return+m};if(l(I,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var j,A=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof A&&(D?y((function(){E.valueOf.call(r)})):m(r)!=I)?d(new R(S(e)),r,A):S(e)},k=n?w(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;k.length>T;T++)f(R,j=k[T])&&!f(A,j)&&O(A,j,N(R,j));A.prototype=E,E.constructor=A,c(o,I,A)}},389:function(t,e,r){var n=r(20),o=r(8),l="["+r(390)+"]",c=RegExp("^"+l+l+"*"),f=RegExp(l+l+"*$"),m=function(t){return function(e){var r=o(n(e));return 1&t&&(r=r.replace(c,"")),2&t&&(r=r.replace(f,"")),r}};t.exports={start:m(1),end:m(2),trim:m(3)}},390:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},417:function(t,e,r){"use strict";r.r(e);r(10),r(51),r(248),r(69),r(27),r(387);var n={components:{PrintDialog:r(386).default},data:function(){return{dateRange:[moment().format("YYYY-MM-01"),moment().format("YYYY-MM-DD")],report:[],loading:!1,showPrintDialog:!1}},methods:{requestData:function(){var t=this,e={dateRange:this.dateRange};this.loading=!0,axios.get("/memberRenewal/report",{params:e}).then((function(e){t.report=e.data})).catch((function(e){t.$message({message:e.response.data.message,type:"error",showClose:!1})})).finally((function(){t.loading=!1}))},printReport:function(t){var e=this,r={dateRange:this.dateRange,action:"print",printer_id:t};this.loading=!0,axios.get("/memberRenewal/report",{params:r}).then((function(t){e.$message({message:"Silakan ambil slip",type:"success",showClose:!1})})).catch((function(t){e.$message({message:t.response.data.message,type:"error",showClose:!1})})).finally((function(){e.loading=!1,e.showPrintDialog=!1}))},formatNumber:function(t){try{for(var e=(t+="").split("."),r=e[0],n=e.length>1?"."+e[1]:"",o=/(\d+)(\d{3})/;o.test(r);)r=r.replace(o,"$1,$2");return r+n}catch(t){return 0}},getSummaries:function(param){var t=this,e=param.columns,r=(param.data,[]);return e.forEach((function(e,n){if(0!==n){if(1===n&&(r[n]=t.report.reduce((function(t,e){return t+Number(e.jumlah)}),0)),2===n){var o=t.report.reduce((function(t,e){return t+Number(e.pendapatan)}),0);r[n]="Rp "+t.formatNumber(o)}}else r[n]="TOTAL"})),r}},mounted:function(){this.requestData()}},o=r(36),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("el-form",{staticStyle:{"text-align":"right"},attrs:{inline:""}},[r("el-form-item",[r("el-date-picker",{attrs:{size:"small",format:"dd/MMM/yyyy","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"Dari tanggal","end-placeholder":"Sampai tanggal"},on:{change:t.requestData},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-printer"},on:{click:function(e){t.showPrintDialog=!0}}},[t._v("PRINT LAPORAN")])],1)],1),t._v(" "),r("el-table",{attrs:{"show-summary":"",stripe:"",data:t.report,"summary-method":t.getSummaries}},[r("el-table-column",{attrs:{label:"Tanggal","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t._f("readableDate")(e.row.tanggal))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Jumlah","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t._f("formatNumber")(e.row.jumlah))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Pendapatan","header-align":"right",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\tRp. "+t._s(t._f("formatNumber")(e.row.pendapatan))+"\n\t\t\t")]}}])})],1),t._v(" "),r("PrintDialog",{attrs:{show:t.showPrintDialog},on:{print:function(e){return t.printReport(e)},close:function(e){t.showPrintDialog=!1}}})],1)}),[],!1,null,"cf1056c0",null);e.default=component.exports;installComponents(component,{PrintDialog:r(386).default})}}]);