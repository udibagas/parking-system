(window.webpackJsonp=window.webpackJsonp||[]).push([[39,15,16,17,18],{557:function(t,e,r){var content=r(583);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(125).default)("65ed3960",content,!0,{sourceMap:!1})},558:function(t,e,r){"use strict";r.r(e);r(39),r(31),r(38),r(14),r(51),r(30),r(52);var n=r(19),o=r(69);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var l={props:["show"],computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.b)(["printerList"])),data:function(){return{printer_id:null}},mounted:function(){this.$store.dispatch("getPrinterList")}},d=l,h=r(46),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{center:"",title:"PILIH PRINTER",visible:t.show,width:"500px","before-close":function(e){t.$emit("close")}},on:{"update:visible":function(e){t.show=e}}},[e("el-form",[e("el-form-item",[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Pilih Printer"},model:{value:t.printer_id,callback:function(e){t.printer_id=e},expression:"printer_id"}},t._l(t.printerList,(function(p){return e("el-option",{key:p.id,attrs:{value:p.id,label:p.nama}})})),1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{icon:"el-icon-error"},on:{click:function(e){return t.$emit("close")}}},[t._v("\n\t\t\tBATAL\n\t\t")]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-printer",type:"primary",disabled:!t.printer_id},on:{click:function(e){return t.$emit("print",t.printer_id)}}},[t._v("\n\t\t\tCETAK STRUK\n\t\t")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},582:function(t,e,r){"use strict";r(557)},583:function(t,e,r){var n=r(124)((function(i){return i[1]}));n.push([t.i,".chart[data-v-4b6777a2]{height:300px}",""]),n.locals={},t.exports=n},593:function(t,e,r){"use strict";r.r(e);var n=r(19),o=(r(541),r(14),r(32),r(58),r(53),r(588)),c=r(715),l=r(687),d=r(685),h=r(689),f=r(688),m=r(686),v=r(618);Object(o.a)([c.a,l.a,d.a,h.a,f.a,m.a]);var y={props:["title","subtext","label","url","date","group"],components:{VChart:v.b},provide:Object(n.a)({},v.a,"light"),data:function(){var t=this;return{data:[],chartOption:{title:{text:this.title,left:"center",subtext:this.subtext},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",top:"bottom",left:"left",data:[],formatter:function(e){var r=t.data.find((function(t){return t.name==e})),n=r.name,o=r.value;return"".concat(n,": ").concat(t.$decimal(o))}},series:[{name:this.label,type:"pie",radius:"50%",center:["65%","55%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},methods:{getData:function(){var t=this,e={date:this.date,group:this.group};this.$axios.$get(this.url,{params:e}).then((function(e){t.data=e,t.chartOption.legend.data=e.map((function(t){return t.name})),t.chartOption.series[0].data=e}))}},created:function(){this.getData()},watch:{date:function(t){this.getData()}}},_=(r(582),r(46)),component=Object(_.a)(y,(function(){return(0,this._self._c)("v-chart",{staticClass:"chart",attrs:{option:this.chartOption}})}),[],!1,null,"4b6777a2",null);e.default=component.exports},661:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{summary:{}}},methods:{getData:function(){var t=this;this.$axios.$get("/api/summary").then((function(e){return t.summary=e}))}},created:function(){this.getData()}},o=r(46),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"mb-3",attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("el-card",[t._v("\n\t\t\tHari Ini\n\t\t\t"),e("div",{staticClass:"text-5xl text-purple-700"},[t._v("\n\t\t\t\tRp. "+t._s(t.$decimal(t.summary.today))+"\n\t\t\t")])])],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-card",[t._v("\n\t\t\tBulan Ini\n\t\t\t"),e("div",{staticClass:"text-5xl text-blue-700"},[t._v("\n\t\t\t\tRp. "+t._s(t.$decimal(t.summary.this_month))+"\n\t\t\t")])])],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-card",[t._v("\n\t\t\tTotal\n\t\t\t"),e("div",{staticClass:"text-5xl text-orange-700"},[t._v("\n\t\t\t\tRp. "+t._s(t.$decimal(t.summary.total))+"\n\t\t\t")])])],1)],1)}),[],!1,null,null,null);e.default=component.exports},662:function(t,e,r){"use strict";r.r(e);r(39),r(31),r(38),r(14),r(51),r(30),r(52);var n=r(19),o=r(69);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var l={props:["date"],computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.b)(["groupJenisKendaraanList"]))},d=l,h=r(46),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",[e("el-row",{attrs:{gutter:20}},[t._l(t.groupJenisKendaraanList,(function(r){return e("el-col",{key:"total".concat(r),attrs:{span:12}},[e("el-card",{staticClass:"mb-3"},[e("PieChart",{attrs:{label:"Jumlah Kendaraan",url:"/api/totalByGroup",date:t.date,group:r,title:"GROUP ".concat(r),subtext:"Jumlah Kendaraan Berdasarkan Group"}})],1)],1)})),t._v(" "),t._l(t.groupJenisKendaraanList,(function(r){return e("el-col",{key:"sum".concat(r),attrs:{span:12}},[e("el-card",{staticClass:"mb-3"},[e("PieChart",{attrs:{label:"Pendapatan",url:"/api/sumByGroup",date:t.date,group:r,title:"GROUP ".concat(r),subtext:"Pendapatan Berdasarkan Group"}})],1)],1)}))],2)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PieChart:r(593).default})},695:function(t,e,r){"use strict";r.r(e);r(339),r(39),r(31),r(38),r(51),r(30),r(52);var n=r(6),o=r(19),c=(r(59),r(14),r(41),r(42),r(224),r(58),r(53),r(69));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var d={data:function(){return{transaction:[],income:[],parkedVehicle:[],vehicleIn:[],showPrintDialog:!1,dateRange:[this.$moment().format("YYYY-MM-01"),this.$moment().format("YYYY-MM-DD")],report:null}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(c.b)(["areaParkirList"])),methods:{printReport:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==e){var r=new URLSearchParams;r.append("action","print"),r.append("dateRange[]",this.dateRange[0]),r.append("dateRange[]",this.dateRange[1]),window.open("".concat(this.$axios.defaults.baseURL,"/api/report?").concat(r),"_blank")}else this.$axios.$get("api/report",{params:{action:"print",printer_id:e,dateRange:this.dateRange}}).then((function(e){t.$message({message:e.message,type:"success"})})).finally((function(){t.showPrintDialog=!1}))},getTransaction:function(){var t=this;this.$axios.$get("/api/getTransaction",{params:{dateRange:this.dateRange}}).then((function(e){t.transaction=e;var r=e.map((function(t){return t.total})).reduce((function(t,e){return t+parseInt(e)}),0);t.transaction.push({jenis_kendaraan:"TOTAL",total:r})}))},getIncome:function(){var t=this;this.$axios.$get("/api/getIncome",{params:{dateRange:this.dateRange}}).then((function(e){t.income=e;var r=e.map((function(t){return Number(t.total)})).reduce((function(t,e){return t+Number(e)}),0),n=e.map((function(t){return Number(t.denda)})).reduce((function(t,e){return t+Number(e)}),0);t.income.push({jenis_kendaraan:"TOTAL",total:r,denda:n})}))},getParkedVehicle:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/api/getParkedVehicle",{params:{dateRange:t.dateRange}});case 2:data=e.sent,t.parkedVehicle=data;case 4:case"end":return e.stop()}}),e)})))()},getVehicleIn:function(){var t=this;this.$axios.$get("/api/getVehicleIn",{params:{dateRange:this.dateRange}}).then((function(e){t.vehicleIn=e;var r=e.map((function(t){return t.total})).reduce((function(t,e){return t+parseInt(e)}),0);t.vehicleIn.push({gate:"TOTAL",total:r})}))},getReport:function(){var t=this;this.$axios.$get("/api/report",{params:{dateRange:this.dateRange}}).then((function(e){return t.report=e}))},requestData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getAreaParkirList");case 2:t.getTransaction(),t.getIncome(),t.getParkedVehicle(),t.getVehicleIn(),t.getReport();case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.requestData()}},h=d,f=r(46),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",[e("ReportIncomeSummary"),t._v(" "),e("el-row",{staticClass:"mb-3 border rounded-md p-3 bg-gray-200"},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"text-blue-700 text-2xl ml-3"},[t._v("LAPORAN")])]),t._v(" "),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e("el-date-picker",{staticClass:"mr-3",attrs:{format:"dd/MMM/yyyy","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},on:{change:t.requestData},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(e){return t.printReport(null)}}},[t._v("\n\t\t\t\tPRINT LAPORAN (A4)\n\t\t\t")]),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(e){t.showPrintDialog=!0}}},[t._v("\n\t\t\t\tPRINT LAPORAN (STRUK)\n\t\t\t")])],1)],1),t._v(" "),e("ReportChart",{attrs:{date:t.dateRange}}),t._v(" "),e("el-row",{attrs:{gutter:15}},[e("el-col",{attrs:{span:10}},[e("el-card",{staticClass:"bg-purple-600 text-white mb-3",attrs:{"body-style":{padding:"0"}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Kendaraan Masuk")]),t._v(" "),e("table",{staticClass:"table min-w-full"},[e("tbody",t._l(t.vehicleIn,(function(r,n){return e("tr",{key:n},[e("td",{staticClass:"border-b px-3 py-1"},[t._v(t._s(r.gate))]),t._v(" "),e("td",{staticClass:"border-b px-3 py-1 text-right"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$decimal(r.total))+"\n\t\t\t\t\t\t\t")])])})),0)])]),t._v(" "),e("el-card",{staticClass:"bg-blue-600 text-white mb-3",attrs:{"body-style":{padding:"0"}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Transaksi")]),t._v(" "),e("table",{staticClass:"table min-w-full"},[e("tbody",t._l(t.transaction,(function(r,n){return e("tr",{key:n},[e("td",{staticClass:"border-b px-3 py-1"},[t._v(t._s(r.jenis_kendaraan))]),t._v(" "),e("td",{staticClass:"border-b px-3 py-1 text-right"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$decimal(r.total))+"\n\t\t\t\t\t\t\t")])])})),0)])]),t._v(" "),e("el-card",{staticClass:"bg-green-600 text-white mb-3",attrs:{"body-style":{padding:"0"}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Pendapatan")]),t._v(" "),e("table",{staticClass:"table min-w-full"},[e("tbody",t._l(t.income,(function(r,n){return e("tr",{key:n},[e("td",{staticClass:"border-b px-3 py-1"},[t._v(t._s(r.jenis_kendaraan))]),t._v(" "),e("td",{staticClass:"border-b px-3 py-1 text-right"},[t._v("\n\t\t\t\t\t\t\t\tRp. "+t._s(t.$decimal(Number(r.total)+Number(r.denda)))+"\n\t\t\t\t\t\t\t")])])})),0)])]),t._v(" "),t.parkedVehicle.length>0?e("el-card",{staticClass:"bg-orange-600 text-white mb-3",attrs:{"body-style":{padding:"0"}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Kendaraan Masih Terparkir")]),t._v(" "),e("table",{staticClass:"table min-w-full"},[e("thead",[e("tr",t._l(Object.keys(t.parkedVehicle[0]),(function(header,r){return e("th",{key:r,staticClass:"border-b px-3 py-1"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(header)+"\n\t\t\t\t\t\t\t")])})),0)]),t._v(" "),e("tbody",t._l(t.parkedVehicle,(function(r,n){return e("tr",{key:n},t._l(Object.keys(t.parkedVehicle[n]),(function(header,n){return e("td",{key:n,staticClass:"border-b px-3 py-1 text-center"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(r[header])+"\n\t\t\t\t\t\t\t")])})),0)})),0)])]):t._e()],1),t._v(" "),e("el-col",{attrs:{span:14}},[e("el-card",[e("div",{domProps:{innerHTML:t._s(t.report)}})])],1)],1),t._v(" "),e("PrintDialog",{attrs:{show:t.showPrintDialog},on:{print:function(e){return t.printReport(e)},close:function(e){t.showPrintDialog=!1}}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ReportIncomeSummary:r(661).default,ReportChart:r(662).default,PrintDialog:r(558).default})}}]);