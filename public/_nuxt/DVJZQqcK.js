import{x as K,X as we,ad as q,af as J,ag as Q,Y as ke,$ as Ee,ah as Ve,F as Ce,ai as Se,Z as Ie,a1 as Te,b as k,t as Ne,a9 as Ae,E as Pe,f as ze,p as Be,k as De,r as Ue,e as $e,d as Fe,m as Le,a as Ke,s as Me}from"./Du_zVPzC.js";import{a as Oe,b as je,E as Re}from"./d7etfkRq.js";import{u as He,E as xe,a as Ge,b as We}from"./kX8oa-TN.js";import{E as Ze,a as qe,b as Je}from"./m9rshxrQ.js";import{E as Qe,a as Xe}from"./DSPCekgJ.js";import{a7 as G,d as se,c as y,r as W,a4 as te,o as re,t as i,v as h,x as b,E as e,W as _,Q as Ye,G as p,A as o,N as B,H as v,y as I,z as t,Z as le,$ as ea,F as M,a5 as aa,an as oe,K as ne,L as ta,I as ie,B as g,J as la}from"./on_tS9bl.js";import{b as oa,d as na,h as O,a as Z,u as ia,_ as sa,w as ra}from"./BV_Ov-cX.js";import{i as da,v as ua}from"./DOm067R-.js";import{E as ca}from"./CeLUVx2J.js";import"./l0sNRNKZ.js";const pa=oa({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:da},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:K},activeActionIcon:{type:K},activeIcon:{type:K},inactiveIcon:{type:K},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:na(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...we(["ariaLabel"])}),ma={[q]:c=>O(c)||G(c)||Z(c),[J]:c=>O(c)||G(c)||Z(c),[Q]:c=>O(c)||G(c)||Z(c)},fa=["onClick"],va=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],_a=["aria-hidden"],ba=["aria-hidden"],ha=["aria-hidden"],de="ElSwitch",ya=se({name:de}),ga=se({...ya,props:pa,emits:ma,setup(c,{expose:T,emit:m}){const l=c,{formItem:E}=ke(),V=Ee(),s=ia("switch"),{inputId:N}=Ve(l,{formItemContext:E}),C=Ce(y(()=>l.loading)),D=W(l.modelValue!==!1),w=W(),U=W(),j=y(()=>[s.b(),s.m(V.value),s.is("disabled",C.value),s.is("checked",r.value)]),R=y(()=>[s.e("label"),s.em("label","left"),s.is("active",!r.value)]),H=y(()=>[s.e("label"),s.em("label","right"),s.is("active",r.value)]),x=y(()=>({width:Se(l.width)}));te(()=>l.modelValue,()=>{D.value=!0});const A=y(()=>D.value?l.modelValue:!1),r=y(()=>A.value===l.activeValue);[l.activeValue,l.inactiveValue].includes(A.value)||(m(q,l.inactiveValue),m(J,l.inactiveValue),m(Q,l.inactiveValue)),te(r,a=>{var d;w.value.checked=a,l.validateEvent&&((d=E==null?void 0:E.validate)==null||d.call(E,"change").catch($=>Ie()))});const P=()=>{const a=r.value?l.inactiveValue:l.activeValue;m(q,a),m(J,a),m(Q,a),aa(()=>{w.value.checked=r.value})},n=()=>{if(C.value)return;const{beforeChange:a}=l;if(!a){P();return}const d=a();[oe(d),O(d)].includes(!0)||Ae(de,"beforeChange must return type `Promise<boolean>` or `boolean`"),oe(d)?d.then(F=>{F&&P()}).catch(F=>{}):d&&P()},S=()=>{var a,d;(d=(a=w.value)==null?void 0:a.focus)==null||d.call(a)};return re(()=>{w.value.checked=r.value}),Te({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},y(()=>!!l.label)),T({focus:S,checked:r}),(a,d)=>(i(),h("div",{class:_(e(j)),onClick:M(n,["prevent"])},[b("input",{id:e(N),ref_key:"input",ref:w,class:_(e(s).e("input")),type:"checkbox",role:"switch","aria-checked":e(r),"aria-disabled":e(C),"aria-label":a.label||a.ariaLabel,name:a.name,"true-value":a.activeValue,"false-value":a.inactiveValue,disabled:e(C),tabindex:a.tabindex,onChange:P,onKeydown:Ye(n,["enter"])},null,42,va),!a.inlinePrompt&&(a.inactiveIcon||a.inactiveText)?(i(),h("span",{key:0,class:_(e(R))},[a.inactiveIcon?(i(),p(e(k),{key:0},{default:o(()=>[(i(),p(B(a.inactiveIcon)))]),_:1})):v("v-if",!0),!a.inactiveIcon&&a.inactiveText?(i(),h("span",{key:1,"aria-hidden":e(r)},I(a.inactiveText),9,_a)):v("v-if",!0)],2)):v("v-if",!0),b("span",{ref_key:"core",ref:U,class:_(e(s).e("core")),style:ea(e(x))},[a.inlinePrompt?(i(),h("div",{key:0,class:_(e(s).e("inner"))},[a.activeIcon||a.inactiveIcon?(i(),p(e(k),{key:0,class:_(e(s).is("icon"))},{default:o(()=>[(i(),p(B(e(r)?a.activeIcon:a.inactiveIcon)))]),_:1},8,["class"])):a.activeText||a.inactiveText?(i(),h("span",{key:1,class:_(e(s).is("text")),"aria-hidden":!e(r)},I(e(r)?a.activeText:a.inactiveText),11,ba)):v("v-if",!0)],2)):v("v-if",!0),b("div",{class:_(e(s).e("action"))},[a.loading?(i(),p(e(k),{key:0,class:_(e(s).is("loading"))},{default:o(()=>[t(e(Ne))]),_:1},8,["class"])):e(r)?le(a.$slots,"active-action",{key:1},()=>[a.activeActionIcon?(i(),p(e(k),{key:0},{default:o(()=>[(i(),p(B(a.activeActionIcon)))]),_:1})):v("v-if",!0)]):e(r)?v("v-if",!0):le(a.$slots,"inactive-action",{key:2},()=>[a.inactiveActionIcon?(i(),p(e(k),{key:0},{default:o(()=>[(i(),p(B(a.inactiveActionIcon)))]),_:1})):v("v-if",!0)])],2)],6),!a.inlinePrompt&&(a.activeIcon||a.activeText)?(i(),h("span",{key:1,class:_(e(H))},[a.activeIcon?(i(),p(e(k),{key:0},{default:o(()=>[(i(),p(B(a.activeIcon)))]),_:1})):v("v-if",!0),!a.activeIcon&&a.activeText?(i(),h("span",{key:1,"aria-hidden":!e(r)},I(a.activeText),9,ha)):v("v-if",!0)],2)):v("v-if",!0)],10,fa))}});var wa=sa(ga,[["__file","switch.vue"]]);const ka=ra(wa),Ea={style:{display:"flex","justify-content":"space-between"}},Va=b("div",{style:{"font-size":"1.2em","line-height":"41px"}},"KELOLA USER",-1),Ca=b("br",null,null,-1),Sa={class:"el-dropdown-link"},Ia=b("br",null,null,-1),La={__name:"user",setup(c){const{showForm:T,formErrors:m,formModel:l,pageSize:E,tableData:V,loading:s,keyword:N,currentChange:C,sizeChange:D,sortChange:w,openForm:U,save:j,deleteData:R,closeForm:H,requestData:x,searchData:A,refreshData:r}=He("/api/user");return re(()=>{x()}),(P,n)=>{const S=Pe,a=ze,d=Re,$=xe,F=k,X=Ze,ue=qe,ce=Je,pe=Oe,me=je,z=Qe,fe=Ge,ve=We,_e=ka,be=Xe,he=ca,ye=ua;return i(),h(ie,null,[b("div",Ea,[Va,b("form",{class:"flex justify-content-end",onSubmit:n[2]||(n[2]=M((...u)=>e(A)&&e(A)(...u),["prevent"]))},[t(S,{size:"small",onClick:n[0]||(n[0]=u=>e(U)({role:0,password:""})),type:"primary",icon:e(Be),class:"mr-2"},{default:o(()=>[g(" TAMBAH USER ")]),_:1},8,["icon"]),b("div",null,[t(a,{size:"small",modelValue:e(N),"onUpdate:modelValue":n[1]||(n[1]=u=>ne(N)?N.value=u:null),placeholder:"Cari","prefix-icon":e(De),clearable:!0},null,8,["modelValue","prefix-icon"])])],32)]),Ca,ta((i(),p(pe,{stripe:"",data:e(V).data,onSortChange:e(w)},{default:o(()=>[t(d,{type:"index",index:e(V).from,label:"#"},null,8,["index"]),t(d,{prop:"name",label:"Nama",sortable:"custom"}),t(d,{prop:"role",label:"Level",sortable:"custom"},{default:o(({row:u})=>[g(I(u.role?"Admin":"Operator"),1)]),_:1}),t(d,{prop:"status",label:"Status",sortable:"custom",align:"center","header-align":"center",width:"100"},{default:o(({row:u})=>[t($,{type:u.status?"success":"info",size:"small",style:{width:"100%"},effect:"dark"},{default:o(()=>[g(I(u.status?"Aktif":"Nonaktif"),1)]),_:2},1032,["type"])]),_:1}),t(d,{width:"60px",align:"center","header-align":"center"},{header:o(()=>[t(S,{link:"",onClick:e(r),icon:e(Ue)},null,8,["onClick","icon"])]),default:o(({row:u})=>[t(ce,null,{dropdown:o(()=>[t(ue,null,{default:o(()=>[t(X,{icon:e($e),onClick:M(L=>e(U)(u),["prevent"])},{default:o(()=>[g(" Edit ")]),_:2},1032,["icon","onClick"]),t(X,{icon:e(Fe),onClick:M(L=>e(R)(u.id),["prevent"])},{default:o(()=>[g(" Hapus ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:o(()=>[b("span",Sa,[t(F,null,{default:o(()=>[t(e(Le))]),_:1})])]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[ye,e(s)]]),Ia,e(V).total?(i(),p(me,{key:0,small:"",background:"",layout:"total, sizes, prev, pager, next","page-size":e(E),"page-sizes":[10,25,50,100],total:e(V).total,onCurrentChange:e(C),onSizeChange:e(D)},null,8,["page-size","total","onCurrentChange","onSizeChange"])):v("",!0),t(he,{modelValue:e(T),"onUpdate:modelValue":n[9]||(n[9]=u=>ne(T)?T.value=u:null),width:"500px",title:e(l).id?"EDIT USER":"TAMBAH USER","close-on-click-modal":!1},{footer:o(()=>[t(S,{icon:e(Ke),onClick:e(H)},{default:o(()=>[g(" BATAL ")]),_:1},8,["icon","onClick"]),t(S,{icon:e(Me),type:"primary",onClick:n[8]||(n[8]=u=>e(j)())},{default:o(()=>[g(" SIMPAN ")]),_:1},8,["icon"])]),default:o(()=>[t(be,{"label-width":"160px","label-position":"left"},{default:o(()=>{var u,L,Y,ee,ae;return[t(z,{label:"Nama",error:(u=e(m).name)==null?void 0:u.join(", ")},{default:o(()=>[t(a,{placeholder:"Nama",modelValue:e(l).name,"onUpdate:modelValue":n[3]||(n[3]=f=>e(l).name=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Level",error:(L=e(m).role)==null?void 0:L.join(", ")},{default:o(()=>[t(ve,{modelValue:e(l).role,"onUpdate:modelValue":n[4]||(n[4]=f=>e(l).role=f),placeholder:"Level",style:{width:"100%"}},{default:o(()=>[(i(),h(ie,null,la([{value:0,label:"Operator"},{value:1,label:"Admin"}],(f,ge)=>t(fe,{value:f.value,label:f.label,key:ge},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Password",error:(Y=e(m).password)==null?void 0:Y.join(", ")},{default:o(()=>[t(a,{type:"password",placeholder:"Password",modelValue:e(l).password,"onUpdate:modelValue":n[5]||(n[5]=f=>e(l).password=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Konfirmasi Password",error:(ee=e(m).password)==null?void 0:ee.join(", ")},{default:o(()=>[t(a,{type:"password",placeholder:"Konfirmasi Password",modelValue:e(l).password_confirmation,"onUpdate:modelValue":n[6]||(n[6]=f=>e(l).password_confirmation=f)},null,8,["modelValue"])]),_:1},8,["error"]),t(z,{label:"Status",error:(ae=e(m).status)==null?void 0:ae.join(", ")},{default:o(()=>[t(_e,{"active-value":!0,"inactive-value":!1,modelValue:e(l).status,"onUpdate:modelValue":n[7]||(n[7]=f=>e(l).status=f),"active-color":"#13ce66"},null,8,["modelValue"]),t($,{type:e(l).status?"success":"info",size:"small",style:{"margin-left":"10px"}},{default:o(()=>[g(I(e(l).status?"Aktif":"Nonaktif"),1)]),_:1},8,["type"])]),_:1},8,["error"])]}),_:1})]),_:1},8,["modelValue","title"])],64)}}};export{La as default};
